---
layout: post
title: "2025-09-29-mysql查询表大小"
author: "gyeon"
date: "2025-09-29_10:05:26"
header-img: "img/post-bg-web.jpg"
header-mask: 0.4
tags:
  - 数据库
  - Database
  - MySQL
---

# MySQL数据库查询表大小

## 查询所有表的大小（包括数据和索引）

```sql
SELECT 
--    table_schema AS '数据库名',
    table_name AS '表名',
    ROUND(data_length/1024/1024, 2) AS '数据大小(MB)',
    ROUND(index_length/1024/1024, 2) AS '索引大小(MB)',
    ROUND((data_length + index_length)/1024/1024, 2) AS '总大小(MB)',
    table_rows AS '行数'
FROM 
    information_schema.TABLES 
WHERE 
    table_schema NOT IN ('information_schema', 'mysql', 'performance_schema')
ORDER BY 
    (data_length + index_length) DESC;
```


## 查询单个表的大小（包括数据和索引）

```sql
SELECT 
--    table_schema AS '数据库名',
    table_name AS '表名',
    ROUND(data_length/1024/1024, 2) AS '数据大小(MB)',
    ROUND(index_length/1024/1024, 2) AS '索引大小(MB)',
    ROUND((data_length + index_length)/1024/1024, 2) AS '总大小(MB)',
    table_rows AS '行数'
FROM 
    information_schema.TABLES 
WHERE 
    table_schema NOT IN ('information_schema', 'mysql', 'performance_schema')
    and table_name like '《表名模糊匹配》'
ORDER BY 
    (data_length + index_length) DESC;
```

## 查询单个表的详细空间信息

```sql
SELECT 
    table_name AS '表名',
    engine AS '存储引擎',
    ROUND(data_length/1024/1024, 2) AS '数据大小(MB)',
    ROUND(index_length/1024/1024, 2) AS '索引大小(MB)',
    ROUND((data_length + index_length)/1024/1024, 2) AS '总大小(MB)',
    ROUND(data_free/1024/1024, 2) AS '碎片空间(MB)',
    table_rows AS '行数',
    avg_row_length AS '平均行长度(字节)',
    create_time AS '创建时间',
    update_time AS '更新时间'
FROM 
    information_schema.TABLES 
WHERE 
    table_schema = '《数据库名》'
    AND table_name = '《数据表名》';
```

## 查找碎片化严重的表

```sql
SELECT 
    table_schema AS '数据库',
    table_name AS '表名',
    ROUND(data_free/1024/1024, 2) AS '碎片空间(MB)',
    ROUND((data_length + index_length)/1024/1024, 2) AS '总大小(MB)',
    ROUND((data_free/(data_length + index_length + data_free))*100, 2) AS '碎片率(%)'
FROM 
    information_schema.TABLES 
WHERE 
    table_schema NOT IN ('information_schema', 'mysql', 'performance_schema')
    AND data_free > 0
ORDER BY 
    data_free DESC
LIMIT 10;
```